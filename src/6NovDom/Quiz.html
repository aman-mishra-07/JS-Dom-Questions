<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Questions</title>
    <link rel="stylesheet" href="/dist/output.css">
</head>

<body>
    <form method="post" id="mathQuiz" class="relative">
        <div class="w-full min-h-screen flex justify-center items-center flex-col gap-2">
            <div data-quizContainor class="w-full max-w-xl border bg-slate-100 h-fit p-6 rounded shadow-sm">
                <fieldset class="space-y-2">
                    <legend class="text-lg font-semibold" data-question>Question</legend>
                    <div>
                        <input type="radio" name="answer" id="a">
                        <label for="optionA" data-optionA>Option A</label>
                    </div>
                    <div>
                        <input type="radio" name="answer" id="b">
                        <label for="optionB" data-optionB>Option B</label>
                    </div>
                    <div>
                        <input type="radio" name="answer" id="c">
                        <label for="optionC" data-optionC>Option C</label>
                    </div>
                    <div>
                        <input type="radio" name="answer" id="d">
                        <label for="optionD" data-optionD>Option D</label>
                    </div>
                </fieldset>
            </div>
            <div class=" w-full max-w-xl flex items-center">
              
                <button type="button" data-nextBtn
                    class="bg-slate-100 text-center w-full font-semibold p-2 rounded-md shadow-sm border">Next</button>
            </div>
        </div>
    </form>


    <script>
        (function () {
            const quiz = {
                quizData : [
                    {
                        question : 'What is 20 + 10 ?',
                        a : '30',
                        b : '10',
                        c : '20',
                        d : '40',
                        correct : 'a'
                    },
                    {
                        question : 'What is 20 / 10 ?',
                        a : '3',
                        b : '1',
                        c : '2',
                        d : '4',
                        correct : 'c'
                    },
                    {
                        question : 'What is 20 + 10 ?',
                        a : '30',
                        b : '10',
                        c : '20',
                        d : '40',
                        correct : 'a'
                    },
                    {
                        question : 'What is 20 / 10 ?',
                        a : '3',
                        b : '1',
                        c : '2',
                        d : '4',
                        correct : 'c'
                    },
                    {
                        question : 'What is 20 + 10 ?',
                        a : '30',
                        b : '10',
                        c : '20',
                        d : '40',
                        correct : 'a'
                    },
                    {
                        question : 'What is 20 / 10 ?',
                        a : '3',
                        b : '1',
                        c : '2',
                        d : '4',
                        correct : 'c'
                    },
                    {
                        question : 'What is 20 + 10 ?',
                        a : '30',
                        b : '10',
                        c : '20',
                        d : '40',
                        correct : 'a'
                    },
                    {
                        question : 'What is 20 / 10 ?',
                        a : '3',
                        b : '1',
                        c : '2',
                        d : '4',
                        correct : 'c'
                    },
                    {
                        question : 'What is 20 + 10 ?',
                        a : '30',
                        b : '10',
                        c : '20',
                        d : '40',
                        correct : 'a'
                    },
                    {
                        question : 'What is 20 / 10 ?',
                        a : '3',
                        b : '1',
                        c : '2',
                        d : '4',
                        correct : 'c'
                    },
                ],
                quizContainor : document.querySelector('[data-quizContainor]'),
                allAnswers : document.querySelectorAll('[name = answer]'),   
                loadQuiz : function(currentQuestion){
                    this.deselectAnswers()
                    document.querySelector('[data-question]').innerHTML = `Q${currentQuestion + 1}.  ${this.quizData[currentQuestion].question}`;
                    document.querySelector('[data-optionA]').innerHTML = this.quizData[currentQuestion].a                  
                    document.querySelector('[data-optionB]').innerHTML = this.quizData[currentQuestion].b                  
                    document.querySelector('[data-optionC]').innerHTML = this.quizData[currentQuestion].c                  
                    document.querySelector('[data-optionD]').innerHTML = this.quizData[currentQuestion].d                  
                },
                deselectAnswers : function(){
                    this.allAnswers.forEach(answer => answer.checked = false);
                },
                getSelected : function(){
                    let answer;
                    this.allAnswers.forEach(answerE => {
                        if(answerE.checked){
                            answer = answerE.id;
                        }
                    })
                    return answer;
                },
                currentQuestion : 0,
                score : 0,
                render : function(){
                    this.loadQuiz(this.currentQuestion)
                    document.querySelector('[data-nextBtn]').addEventListener('click', (e) => {
                        if(e.target.innerHTML == 'Reload'){
                            location.reload();
                        }
                        const answer = this.getSelected();
                        if(answer){
                            if(answer === this.quizData[this.currentQuestion].correct){
                                this.score++;
                            }
                            this.currentQuestion++;
                        }
                        if(this.currentQuestion < this.quizData.length){
                            this.loadQuiz(this.currentQuestion)
                        } else {

                            if(this.score >= 6){
                                this.quizContainor.innerHTML = `
                                <h2>Your Score is ${this.score} / ${this.quizData.length}. Passed</h2> `
                            }
                            else{
                                this.quizContainor.innerHTML = `
                                <h2>Your Score is ${this.score} / ${this.quizData.length}. Failed</h2> `

                            }
                        }
                        if(this.currentQuestion === this.quizData.length - 1){
                            e.target.classList.add('text-white')
                            e.target.classList.remove('bg-slate-100')
                            e.target.classList.add('bg-blue-600')
                            e.target.innerHTML = 'submit'
                        }
                        if(this.currentQuestion === this.quizData.length){
                            e.target.innerHTML = 'Reload'
                        }
                    })
                }

            }
            quiz.render();

        })()
    </script>
</body>

</html>